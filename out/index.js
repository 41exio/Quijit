!function(){class e{constructor(e){this.question=e.question,this.answer=e.answer,e.snippet&&(this.snippet=e.snippet.replace(/\\n/g,"\n")),this.notAnswers=[];let t=1;for(;e[`false${t}`];)this.notAnswers.push(e[`false${t}`]),t++}}class t{constructor(){this.body=document.getElementsByTagName("body")[0],this.main=document.getElementsByTagName("main")[0],this.classes={correct:"correctAnswer"},this.hashes={dark:"#dark",load:"#convert",correct:"#correct",incorrect:"#wrong"}}}const n=new t,o=(e,t)=>{t.innerHTML="";const o=document.createRange().createContextualFragment('<div id="questionDiv"></div>'),s=o.querySelector("div"),c=document.createElement("h2");if(c.textContent=e.question,s.appendChild(c),e.snippet){const t=document.createElement("pre");t.textContent=e.snippet,s.appendChild(t)}let r=[];const a=document.createElement("a");a.textContent=e.answer,a.className=n.classes.correct,a.href=n.hashes.correct,r.push(a),e.notAnswers.forEach(e=>{const t=document.createElement("a");t.textContent=e,t.className="",t.href=n.hashes.incorrect,r.push(t)}),(r=(e=>{let t=e.length;for(;0!==t;){const n=Math.floor(Math.random()*t),o=e[t-=1];e[t]=e[n],e[n]=o}return e})(r)).forEach(e=>{s.appendChild(e)}),t.appendChild(o)},s=new t,c={},r=()=>{c.result={correct:0,incorrect:0,total:0}};r(),c.hintTimeout="";const a=()=>{((e,t)=>{const n={};e.onchange=()=>{const o=e.files[0];if("text/csv"===o.type||"application/vnd.ms-excel"===o.type){const e=new FileReader;e.onload=()=>{n.content=e.result,n.name=o.name.replace(/\.[^\.]+$/,""),t(n)},e.readAsText(o)}else console.log("Error: File type not accepted.")}})((e=>(e.innerHTML='<input type="file" id="fileInput" name="file" accept=".csv">',e.firstChild))(s.main),t=>{c.csvObject=(e=>{const t=/(?:[\t ]?)+("+)?(.*?)\1(?:[\t ]?)+(?:,|$)/gm,n=(e,t,n)=>t<n.length-1,o=(e=e.replace(/[\r]/g,"")).split("\n"),s=o.splice(0,1)[0].match(t).filter(e=>e.length>1);for(let e=0;e<s.length-1;e++)s[e]=s[e].slice(0,-1);const c=[];for(const e of o){const o={};for(const[c,r]of[...e.matchAll(t)].filter(n).entries())o[s[c]]=r[2].length>0?r[2]:null;Object.keys(o).length>0&&c.push(o)}return c})(t.content),c.remaining=[],c.csvObject.forEach(t=>{c.remaining.push(new e(t))}),i(),window.location.hash=""})},i=()=>{if(c.remaining&&c.remaining.length>0){const e=Math.floor(Math.random()*c.remaining.length);c.current=c.remaining.splice(e,1)[0],o(c.current,s.main),clearTimeout(c.hintTimeout),c.hintTimeout=setTimeout(()=>{(e=>{e.firstChild.classList.add("hint")})(s.main)},1e4)}else((e,t)=>{const n=Math.floor(e.correct/e.total*100);t.innerHTML="<p></p>",t.firstChild.textContent=`You got ${e.correct} correct, ${e.incorrect} wrong, out of a total of ${e.total}, which is a success rate of ${n}%`})(c.result,s.main),r();window.location.hash=""};window.onhashchange=()=>{const e=window.location.hash;e===s.hashes.load?a():e===s.hashes.dark?(s.body.classList.toggle("dark"),window.location.hash=""):e===s.hashes.correct?(c.result.correct++,c.result.total++,i()):e===s.hashes.incorrect&&(c.result.incorrect++,c.result.total++,i())}}();