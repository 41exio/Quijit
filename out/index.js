!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=function e(n){t(this,e),this.question=n.question,this.answer=n.answer,n.snippet&&(this.snippet=n.snippet.replace(/\\n/g,"\n")),this.notAnswers=[];for(var r=1;n["false".concat(r)];)this.notAnswers.push(n["false".concat(r)]),r++},o=function(){function n(e){var r=this;t(this,n),this.remaining=[],e.forEach((function(t){r.remaining.push(new i(t))})),this.correct=[],this.incorrect=[]}var r,o,a;return r=n,(o=[{key:"loadNext",value:function(){var t=Math.floor(Math.random()*this.remaining.length);this.current=this.remaining.splice(t,1)[0]}},{key:"questionsRemain",value:function(){return this.remaining.length>0}},{key:"getResult",value:function(){return{remaining:this.remaining.length,correct:this.correct.length,incorrect:this.incorrect.length,total:this.remaining.length+this.correct.length+this.incorrect.length}}},{key:"answerWasCorrect",value:function(t){t?this.correct.push(this.current):this.incorrect.push(this.current)}}])&&e(r.prototype,o),a&&e(r,a),n}(),a=function e(){t(this,e),this.body=document.getElementsByTagName("body")[0],this.main=document.getElementsByTagName("main")[0],this.counter={},this.counter.correct=document.querySelector("footer div.progress a.correct"),this.counter.incorrect=document.querySelector("footer div.progress a.incorrect"),this.counter.remaining=document.querySelector("footer div.progress a.remaining"),this.classes={correct:"correctAnswer"},this.hashes={dark:"#dark",toggleHint:"#toggleHint",load:"#convert",correct:"#correct",incorrect:"#wrong"}},c=new a,s=function(t,e){e.innerHTML="";var n=document.createRange().createContextualFragment('<div id="questionDiv"></div>'),r=n.querySelector("div"),i=document.createElement("h2");if(i.textContent=t.question,r.appendChild(i),t.snippet){var o=document.createElement("pre");o.textContent=t.snippet,r.appendChild(o)}var a=[],s=document.createElement("a");s.textContent=t.answer,s.className=c.classes.correct,s.href=c.hashes.correct,a.push(s),t.notAnswers.forEach((function(t){var e=document.createElement("a");e.textContent=t,e.className="",e.href=c.hashes.incorrect,a.push(e)})),(a=function(t){for(var e=t.length;0!==e;){var n=Math.floor(Math.random()*e),r=t[e-=1];t[e]=t[n],t[n]=r}return t}(a)).forEach((function(t){r.appendChild(t)})),e.appendChild(n)},l=new a,u={hintTimeout:""},h=function(){var t;!function(t,e){var n={};t.onchange=function(){var r=t.files[0];if("text/csv"===r.type||"application/vnd.ms-excel"===r.type){var i=new FileReader;i.onload=function(){n.content=i.result,n.name=r.name.replace(/\.[^\.]+$/,""),e(n)},i.readAsText(r)}else console.log("Error: File type not accepted.")}}(((t=l.main).innerHTML='<input type="file" id="fileInput" name="file" accept=".csv">',t.firstChild),(function(t){var e=function(t){for(var e=/(?:[\t ]?)+("+)?(.*?)\1(?:[\t ]?)+(?:,|$)/gm,i=function(t,e,n){return e<n.length-1},o=(t=t.replace(/[\r]/g,"")).split("\n"),a=o.splice(0,1)[0].match(e).filter((function(t){return t.length>1})),c=0;c<a.length-1;c++)a[c]=a[c].slice(0,-1);var s=[],l=!0,u=!1,h=void 0;try{for(var f,m=o[Symbol.iterator]();!(l=(f=m.next()).done);l=!0){var d=f.value,g={},p=!0,v=!1,y=void 0;try{for(var w,b=r(d.matchAll(e)).filter(i).entries()[Symbol.iterator]();!(p=(w=b.next()).done);p=!0){var C=n(w.value,2),q=C[0],x=C[1];g[a[q]]=x[2].length>0?x[2]:null}}catch(t){v=!0,y=t}finally{try{p||null==b.return||b.return()}finally{if(v)throw y}}Object.keys(g).length>0&&s.push(g)}}catch(t){u=!0,h=t}finally{try{l||null==m.return||m.return()}finally{if(u)throw h}}return s}(t.content);u.quijit=new o(e),f(),window.location.hash=""}))},f=function(){var t,e;t=u.quijit.getResult(),(e=l.counter).correct.textContent=t.correct,e.incorrect.textContent=t.incorrect,e.remaining.textContent=t.remaining,u.quijit.questionsRemain()?(u.quijit.loadNext(),s(u.quijit.current,l.main),clearTimeout(u.hintTimeout),u.hintTimeout=setTimeout((function(){!function(t){t.firstChild.classList.add("hint")}(l.main)}),1e4)):function(t,e){var n=Math.floor(t.correct/t.total*100);e.innerHTML="<p></p>",e.firstChild.textContent="You got ".concat(t.correct," correct, ").concat(t.incorrect," wrong, out of a total of ").concat(t.total,", which is a success rate of ").concat(n,"%")}(u.quijit.getResult(),l.main),window.location.hash=""};window.onhashchange=function(){var t=window.location.hash;t===l.hashes.load?h():t===l.hashes.dark?(l.body.classList.toggle("dark"),window.location.hash=""):t===l.hashes.toggleHint?window.location.hash="":t===l.hashes.correct?(u.quijit.answerWasCorrect(!0),f()):t===l.hashes.incorrect&&(u.quijit.answerWasCorrect(!1),f())}}();